# Баг-репорты: Проверка сохранения данных в БД

| ID       | Описание                                                                                                                              | Шаги воспроизведения                                                                                                                                                                                                                                                                                                                | Ожидаемый результат                                                                 | Фактический результат                                                                 | Приоритет | Окружение                                  |
|----------|----------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|---------|---------------------------------------------|
| DB-001   | При успешной оплате в кредит, `bank_id` из `credit_request_entity` не сохраняется в `order_entity.credit_id`                            | 1. Открыть страницу покупки тура<br>2. Нажать "Купить в кредит"<br>3. Ввести данные:<br> - Номер карты: `4444 4444 4444 4441`<br> - Месяц: `12`<br> - Год: `25`<br> - Владелец: `Andrey`<br> - CVC: `111`<br>4. Нажать "Продолжить"<br>5. Проверить базу данных: `SELECT * FROM order_entity` и `SELECT * FROM credit_request_entity` | В таблице `order_entity` в поле `credit_id` должен быть сохранён `bank_id` из `credit_request_entity` | Поле `credit_id` пустое (`NULL`)                                                       | Высокий | Docker (MySQL, gate-simulator, app)         |
| DB-002   | При отклонённой оплате в кредит, `bank_id` из `credit_request_entity` не сохраняется в `order_entity.credit_id`                         | 1. Открыть страницу покупки тура<br>2. Нажать "Купить в кредит"<br>3. Ввести данные отклонённой карты (`4444 4444 4444 4442`)<br>4. Нажать "Продолжить"<br>5. Проверить базу данных                                                                                                                                                 | В таблице `order_entity` в поле `credit_id` должен быть сохранён `bank_id` из `credit_request_entity` | Поле `credit_id` пустое (`NULL`)                                                       | Высокий    Docker (MySQL, gate-simulator, app)       |
| DB-003   | Нарушена связь между заказом и кредитом: `credit_id` пустой в `order_entity`, хотя кредит создан и имеет статус `APPROVED` или `DECLINED` | 1. Выполнить оплату в кредит (успешно или отклонено)<br>2. Подключиться к БД<br>3. Выполнить запрос: `SELECT o.id, o.credit_id, c.bank_id, c.status FROM order_entity o, credit_request_entity c ORDER BY o.created DESC LIMIT 1`                                                                                                   | Поле `credit_id` в `order_entity` должно содержать значение `bank_id` из `credit_request_entity`     | Поле `credit_id` = `NULL`, хотя `credit_request_entity` содержит запись с `bank_id` и статусом | Высокий | Docker (MySQL, gate-simulator, app)         |
